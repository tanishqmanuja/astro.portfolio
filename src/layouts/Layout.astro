---
import "../styles/global.css";

import { join } from "node:path";
import EmojiFavicon from "../components/EmojiFavicon.astro";
import { DESCRIPTION, TITLE } from "../site.config";
import { AstroFont } from "astro-font";
import type { ComponentProps } from "astro/types";
import { ViewTransitions } from "astro:transitions";

interface Props {
  title?: string;
  description?: string;
}

const { title = TITLE, description = DESCRIPTION } = Astro.props;

const FONTS_DIR = "public/fonts";
const fontConfig = [
  {
    name: "Nothing",
    src: [
      {
        style: "normal",
        path: join(process.cwd(), FONTS_DIR, "ndot57.otf"),
      },
    ],
    preload: true,
    display: "swap",
    fallback: "monospace",
    cssVariable: "font-nothing",
  },
] satisfies ComponentProps<typeof AstroFont>["config"];
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content=`${description}` />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <EmojiFavicon emoji="ðŸ§‘ðŸ»â€ðŸ’»" />
    <AstroFont config={fontConfig} />
    <ViewTransitions />
  </head>
  <body>
    <slot />
  </body>
</html>
