---
import { slugify } from "@/utils/slug";

interface Props {
  slug: string;
  title: string;
  subtitle?: string;
  class?: string;
}

const { slug, title, subtitle } = Astro.props;
---

<header class:list={Astro.props.class}>
  <h4 class="title">
    <a class="primary-selectable" href={`/${slugify(slug)}/`}>{title}</a>
    <span aria-hidden="true">â†±</span>
  </h4>
  {subtitle && <h5 class="subtitle">{subtitle}</h5>}
</header>

<style lang="scss">
  header {
    display: flex;
    flex-direction: column;
    gap: var(--size-1);
  }

  .title {
    width: fit-content;
    font-weight: normal;
    font-family: var(--ff-pixelated);
    font-size: var(--fs-pixelated-medium);
    line-height: 1.5;
    overflow: hidden;

    a {
      position: relative;

      &::after {
        content: "";
        position: absolute;
        height: 1px;
        width: calc(100% - 0px);
        left: 0;
        bottom: -1px;
        background: var(--clr-text-highlight);
        opacity: 1;
        transition:
          opacity 0.2s var(--ease-in-out-4),
          transform 0.2s var(--ease-in-out-5);
        transform: translate3d(-101%, 0, 0);
      }
    }

    span {
      user-select: none;
      transition: color 0.2s var(--ease-in-out-4);
    }

    &:is(:hover, :active, :focus-within) {
      a::after {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }

      span {
        color: var(--clr-text-subdued);
      }
    }
  }

  .subtitle {
    line-height: 1;
    text-transform: uppercase;
    font-family: var(--ff-pixelated);
    font-size: var(--fs-pixelated-small);
    color: color-mix(in srgb, var(--clr-text-secondary), transparent 30%);
  }
</style>
