---
import { getCollection } from "astro:content";

import Section from "@/components/Section.astro";
import ProjectCard from "./ProjectCard.astro";

const projects = await getCollection("project");
---

<Section title="Projects">
  <ul class="project-list" role="list">
    {
      projects
        .sort((a, b) => a.id.localeCompare(b.id))
        .map((project, i) => (
          <li class="project-list-item">
            <span class="project-list-item__marker">
              {i.toString().padStart(2, "0")}
            </span>
            <ProjectCard project={project} />
          </li>
        ))
    }
  </ul>
</Section>

<style lang="scss">
  .project-list {
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding-inline-start: 1ch;
  }

  .project-list-item {
    display: flex;
    flex-direction: row;
    gap: 2ch;

    &__marker {
      height: fit-content;
      color: var(--clr-text-subdued);
      font-family: var(--ff-dotmatrix);
      line-height: 24px;
      font-weight: bold;
      white-space: nowrap;

      translate: 0 2px;
    }
  }
</style>
